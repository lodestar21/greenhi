<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.greenhi.admin.user.dao.UserDAO">

    <select id="get" parameterType="com.greenhi.admin.user.vo.UserVO" resultType="com.greenhi.admin.user.vo.UserVO">
    <![CDATA[
        SELECT
              A.USER_NO          AS userNo
            , A.CREATE_TIME      AS createTime
            , A.CREATE_USER      AS createUser
            , A.MODIFY_TIME      AS modifyTime
            , A.MODIFY_USER      AS modifyUser
            , A.IS_DELETE        AS isDelete
            , A.USER_ID          AS userId
            , A.USER_NAME        AS userName
            , A.USER_TYPE        AS userType
            , A.CUST_NAME        AS custName
            , A.LOCAL_CODE       AS localCode
            , A.EMAIL            AS email
            , A.PHONE_NUMBER     AS phoneNumber
            , A.USER_STAT        AS userStat
            , A.PASS_WORD        AS passWord
            , A.DEPOSIT_BANK     AS depositBank
            , A.ACCOUNT_NUM      AS accountNum
            , A.REMARK           AS remark
            , (SELECT CODE_NAME
                 FROM T_CODE
                WHERE UPER_CODE = 100
                  AND CODE_ID = A.USER_TYPE
               ) AS userTypeName
            , (SELECT CODE_NAME
                 FROM T_CODE
                WHERE UPER_CODE = 300
                  AND CODE_ID = A.LOCAL_CODE
               ) AS localCodeName
            , (SELECT CODE_NAME
                 FROM T_CODE
                WHERE UPER_CODE = 200
                  AND CODE_ID = A.USER_STAT
               ) AS userStatName
        FROM T_USER A
    ]]>
    	<trim prefix="WHERE" prefixOverrides="AND |OR ">
	        <if test="userId != null and userId != ''">
	            AND A.USER_ID = #{userId}
	        </if>
	        <if test="userStat != null and userStat != ''">
	            AND A.USER_STAT = #{userStat}
	        </if>
	        <if test="isDelete != null and isDelete != ''">
	            AND A.IS_DELETE = #{isDelete}
	        </if>
	        <if test="userNo > 0 ">
	            AND A.USER_NO = #{userNo}
	        </if>
        </trim>
    </select>
    
</mapper>